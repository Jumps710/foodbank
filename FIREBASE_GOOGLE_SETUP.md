# Firebase Google認証 セットアップ手順

## 1. Firebase Console でGoogle認証を有効化

### アクセス先
https://console.firebase.google.com/project/foodbank-management/authentication/providers

### 手順
1. **Authentication** → **Sign-in method** タブを選択
2. **Google** の行をクリック
3. **「有効にする」** をONにする
4. **プロジェクトのサポートメール** を設定（あなたのGoogleアカウントのメール）
5. **保存** をクリック

## 2. 承認済みドメインの確認

### 確認項目
Authentication → Settings → 承認済みドメインに以下が追加されていることを確認：
- `jumps710.github.io`
- `localhost` （開発用）

## 3. テスト手順

### 管理画面でのテスト
1. **管理画面にアクセス**: https://jumps710.github.io/foodbank/admin.html
2. **「Googleでサインイン」ボタン**をクリック
3. **Googleアカウント選択画面**が表示される
4. **アカウントを選択**してサインイン
5. **管理ダッシュボード**に遷移することを確認

### 期待される動作
- **新規ユーザー**: 「Googleアカウントで新規登録しました！」メッセージ
- **既存ユーザー**: 「Googleアカウントでログインしました！」メッセージ
- **Firebase Console**: Usersタブに新しいユーザーが追加される

## 4. 利用可能な認証方法

### 現在対応済み
- ✅ **メール/パスワード認証** - 新規作成・ログイン
- ✅ **Google認証** - ワンクリックサインイン

### 認証方法の特徴
- **メール/パスワード**: 完全に独立したアカウント
- **Google認証**: 既存のGoogleアカウントを使用、より安全で便利

## 5. ポップアップブロック対策

### ポップアップがブロックされた場合
- 自動的にリダイレクト方式にフォールバック
- ユーザーには「Googleサインインページにリダイレクトします...」と表示
- リダイレクト後に自動的に認証完了

## 6. トラブルシューティング

### よくある問題
1. **「この操作は許可されていません」**
   - Firebase ConsoleでGoogle認証が有効になっていない
   - プロジェクトのサポートメールが設定されていない

2. **「承認されていないドメイン」**
   - 承認済みドメインに現在のドメインが追加されていない

3. **ポップアップが開かない**
   - ブラウザのポップアップブロック設定を確認
   - 自動的にリダイレクト方式にフォールバックするため、通常は問題なし

## 7. セキュリティ考慮事項

- Firebase Authenticationはセキュアな認証システム
- IDトークンによるセッション管理
- Googleアカウントの2段階認証も有効
- 管理者権限は別途アプリケーション側で制御